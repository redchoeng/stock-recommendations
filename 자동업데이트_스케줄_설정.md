# 📅 자동 업데이트 스케줄 설정 가이드

## ✅ 현재 설정

**평일만 매 2시간마다 업데이트**
- 월요일 ~ 금요일만 실행
- 매 2시간 간격 (00시, 02시, 04시, ...)
- 주말(토, 일)에는 실행 안함

```yaml
cron: '0 */2 * * 1-5'
```

---

## 🌍 미국 주식시장 개장시간

### 미국 시간 (EST/EDT)
- 월-금요일: 9:30 AM - 4:00 PM

### UTC 시간
- 동절기: 15:30 - 22:00
- 서머타임: 14:30 - 21:00

### 한국 시간 (KST)
- 밤 11:30 PM - 새벽 6:00 AM (다음날)

---

## 🎯 추천 스케줄 옵션

### 옵션 1: 평일만 (현재 설정) ⭐ 추천
```yaml
cron: '0 */2 * * 1-5'
```
- **실행**: 월-금, 매 2시간
- **장점**: 주말 API 낭비 없음, 효율적
- **월 실행**: 약 260회

### 옵션 2: 평일 + 시장시간대만 (가장 효율적)
```yaml
cron: '0 14-22/2 * * 1-5'
```
- **실행**: 월-금, UTC 14-22시 사이 매 2시간
- **장점**: 미국 시장 개장시간만, API 제한 안전
- **월 실행**: 약 100회

### 옵션 3: 평일 장중만 (초효율)
```yaml
cron: '30 14,16,18,20 * * 1-5'
```
- **실행**: 월-금, 시장 개장 중 4회만
- **장점**: 필요할 때만, 무료 할당량 여유
- **월 실행**: 약 80회

### 옵션 4: 하루 2회 (최소)
```yaml
cron: '0 9,21 * * 1-5'
```
- **실행**: 월-금, 오전/오후 각 1회
- **장점**: 최소 업데이트, API 안전
- **월 실행**: 약 40회

### 옵션 5: 매일 24시간 (비추천)
```yaml
cron: '0 */2 * * *'
```
- **실행**: 매일, 주말 포함
- **단점**: 주말 API 낭비, 제한 위험
- **월 실행**: 360회

---

## 📊 실행 횟수 비교

| 옵션 | 하루 실행 | 월 실행 | API 호출 | 효율성 |
|-----|---------|--------|---------|-------|
| 평일만 (현재) | 12회 (평일만) | ~260회 | 보통 | ⭐⭐⭐⭐ |
| 시장시간대만 | 5회 (평일만) | ~100회 | 낮음 | ⭐⭐⭐⭐⭐ |
| 장중만 | 4회 (평일만) | ~80회 | 최소 | ⭐⭐⭐⭐⭐ |
| 하루 2회 | 2회 (평일만) | ~40회 | 최소 | ⭐⭐⭐ |
| 24시간 | 12회 (매일) | 360회 | 높음 | ⭐⭐ |

---

## 🔧 스케줄 변경 방법

### 1. 파일 수정
`.github/workflows/daily-update.yml` 파일에서:

```yaml
on:
  schedule:
    - cron: '원하는 스케줄'
```

### 2. Cron 표현식 해석

```
분 시 일 월 요일
│  │  │  │  │
│  │  │  │  └─ 0-6 (0=일요일, 1=월요일, ..., 5=금요일, 6=토요일)
│  │  │  └──── 1-12 (월)
│  │  └─────── 1-31 (일)
│  └────────── 0-23 (시간, UTC 기준)
└───────────── 0-59 (분)
```

### 예시:
- `0 */2 * * *` = 매 2시간마다, 매일
- `0 */2 * * 1-5` = 매 2시간마다, 평일만
- `0 14-22/2 * * 1-5` = 14-22시 사이 매 2시간, 평일만
- `30 14,16,18,20 * * 1-5` = 14:30, 16:30, 18:30, 20:30, 평일만
- `0 9 * * 1-5` = 매일 오전 9시, 평일만

---

## 💡 추천 조합

### 일반 사용자
```yaml
cron: '0 */2 * * 1-5'  # 현재 설정, 평일만
```

### API 절약형
```yaml
cron: '0 14-22/2 * * 1-5'  # 시장시간만
```

### 최소 업데이트
```yaml
cron: '0 9,21 * * 1-5'  # 하루 2회
```

### 실시간 추종
```yaml
cron: '0 14-21 * * 1-5'  # 시장시간 매 1시간
```

---

## 🚀 적용 방법

### Step 1: 파일 수정
`.github/workflows/daily-update.yml` 파일에서 `cron` 값 변경

### Step 2: GitHub에 푸시
```bash
cd "c:\Users\niceh\새 폴더\finance-datareader"
git add .github/workflows/daily-update.yml
git commit -m "Update schedule: weekdays only"
git push
```

### Step 3: 자동 적용
- 푸시 즉시 새 스케줄 적용
- 다음 예정 시간부터 실행

---

## 📅 시간대 참고

### UTC (GitHub Actions 기준)
- GitHub Actions는 UTC 시간 사용
- 한국은 UTC+9

### 한국 시간 → UTC 변환
| 한국 시간 | UTC 시간 |
|---------|---------|
| 00:00 | 15:00 (전날) |
| 09:00 | 00:00 |
| 12:00 | 03:00 |
| 18:00 | 09:00 |
| 21:00 | 12:00 |
| 24:00 | 15:00 |

### 예시: 한국 시간 오전 9시 실행
```yaml
cron: '0 0 * * 1-5'  # UTC 00:00 = 한국 09:00
```

---

## 🐛 문제 해결

### Q: 주말에도 실행돼요
A: `* * * 1-5`에서 마지막 `1-5`가 평일(월-금)입니다.

### Q: 시간이 안 맞아요
A: UTC 시간입니다. 한국 시간에서 -9시간 하세요.

### Q: 실행 안돼요
A: GitHub Actions 탭에서 실행 기록 확인

### Q: 수동 실행하려면?
A: GitHub Actions → workflow 선택 → "Run workflow"

---

## ✅ 현재 설정 확인

```bash
cd "c:\Users\niceh\새 폴더\finance-datareader"
cat .github/workflows/daily-update.yml | grep cron
```

---

## 🎯 최종 추천

**현재 설정 (평일만 2시간마다)이 가장 균형잡힌 선택입니다!**

- ✅ 주말 API 낭비 없음
- ✅ 충분한 업데이트 빈도
- ✅ 무료 할당량 안전
- ✅ 시장 변화 추적 가능

더 효율적으로 하려면 "시장시간대만" 옵션 추천!
