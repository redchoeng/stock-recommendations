# 📅 1시간마다 자동 업데이트 설정 가이드

## ⚠️ 주의사항

**1시간마다 업데이트 시 고려사항:**
- GitHub Actions 무료 계정: 월 2,000분 제한 (1시간마다 실행 시 초과 가능)
- yfinance API 호출 제한: 과도한 호출 시 차단될 수 있음
- 미국 주식시장: 평일 9:30 AM - 4:00 PM EST만 개장 (한국시간 밤 11:30 - 새벽 6:00)

**추천 설정:**
- ✅ 시장 시간대만 실행 (평일 낮 시간)
- ✅ 2-4시간 간격이 더 안정적
- ✅ API 제한 회피 가능

---

## 🌐 방법 1: GitHub Actions (추천)

### 장점
- ✅ PC 꺼져있어도 자동 실행
- ✅ 클라우드에서 자동 업데이트
- ✅ GitHub Pages에 자동 배포

### 단점
- ⚠️ 무료 계정: 월 2,000분 제한
- ⚠️ 1시간마다 실행 시 제한 초과 가능

### 설정 방법

#### 옵션 A: 매 1시간마다 (24시간)
```yaml
schedule:
  - cron: '0 * * * *'
```

#### 옵션 B: 시장 시간대만 (평일 14-22시 UTC = 미국 개장시간)
```yaml
schedule:
  - cron: '0 14-22 * * 1-5'
```

#### 옵션 C: 매 2시간마다 (추천)
```yaml
schedule:
  - cron: '0 */2 * * *'
```

#### 옵션 D: 매 4시간마다 (안전)
```yaml
schedule:
  - cron: '0 */4 * * *'
```

### 적용 방법
1. `.github/workflows/daily-update.yml` 파일 수정
2. Git 커밋 및 푸시
```bash
git add .github/workflows/daily-update.yml
git commit -m "Update schedule to hourly"
git push
```

---

## 🖥️ 방법 2: Windows 작업 스케줄러

### 장점
- ✅ 무제한 실행 가능
- ✅ 로컬에서 빠르게 실행

### 단점
- ⚠️ PC가 켜져있어야 함
- ⚠️ 수동으로 GitHub 푸시 필요 (선택)

### 설정 방법 (자동)

1. **PowerShell을 관리자 권한으로 실행**
   - Windows 검색 → "PowerShell" 우클릭 → "관리자 권한으로 실행"

2. **스크립트 실행**
```powershell
cd "c:\Users\niceh\새 폴더\finance-datareader"
.\작업스케줄러_등록.ps1
```

3. **완료!** 이제 1시간마다 자동 실행됩니다.

### 설정 방법 (수동)

1. **작업 스케줄러 열기**
   - `Win + R` → `taskschd.msc` 입력

2. **기본 작업 만들기**
   - 우측 "기본 작업 만들기" 클릭
   - 이름: "주식리포트_1시간마다_업데이트"

3. **트리거 설정**
   - "매일" 선택
   - 고급 설정: "작업 반복 간격: 1시간"

4. **작업 설정**
   - "프로그램 시작" 선택
   - 프로그램: `C:\Users\niceh\새 폴더\finance-datareader\자동_업데이트_1시간마다.bat`

5. **완료**

### 확인 방법
```powershell
# 작업 목록 확인
Get-ScheduledTask -TaskName "주식리포트_1시간마다_업데이트"

# 작업 삭제 (필요 시)
Unregister-ScheduledTask -TaskName "주식리포트_1시간마다_업데이트" -Confirm:$false
```

---

## 🎯 추천 설정

### 상황별 추천

**1. PC를 항상 켜둔다면:**
- → **Windows 작업 스케줄러** (무제한 실행)

**2. PC를 자주 끈다면:**
- → **GitHub Actions** (클라우드 자동 실행)
- → 매 2-4시간 간격 권장

**3. 실시간에 가깝게 보고 싶다면:**
- → **Windows 작업 스케줄러** + 1시간 간격
- → GitHub Actions는 API 제한 우려

**4. 안정적으로 운영하려면:**
- → **GitHub Actions** + 시장 시간대만 (평일 14-22시 UTC)
- → API 제한 회피, 무료 할당량 절약

---

## 📊 예상 사용량

### GitHub Actions (무료 계정 기준: 월 2,000분)

| 실행 주기 | 월 실행 횟수 | 예상 사용 시간* | 남은 여유 |
|---------|-----------|--------------|---------|
| 1시간마다 (24시간) | 720회 | 3,600분 | ❌ 초과 |
| 2시간마다 | 360회 | 1,800분 | ✅ 200분 |
| 4시간마다 | 180회 | 900분 | ✅ 1,100분 |
| 시장시간대만 (9시간/일) | 270회 | 1,350분 | ✅ 650분 |

*각 실행당 5분 소요 가정

---

## 🔧 현재 적용된 설정

**GitHub Actions:**
- 파일: `.github/workflows/daily-update.yml`
- 현재: 매 1시간마다 (`0 * * * *`)
- 변경하려면: 위 파일에서 cron 값 수정

**Windows 작업 스케줄러:**
- 배치 파일: `자동_업데이트_1시간마다.bat`
- 등록 스크립트: `작업스케줄러_등록.ps1`
- 아직 등록 안됨 (원하면 위 PowerShell 스크립트 실행)

---

## ❓ FAQ

**Q: GitHub Actions가 실행 안돼요**
A: GitHub 저장소 Settings → Actions → 활성화 확인

**Q: API 호출 제한 걸렸어요**
A: 실행 주기를 2-4시간으로 늘리세요

**Q: 두 가지 방법을 동시에 쓸 수 있나요?**
A: 가능하지만, 중복 실행되므로 비추천

**Q: 실행 기록 확인하려면?**
A: GitHub → Actions 탭에서 확인

**Q: 특정 시간대만 실행하려면?**
A: cron 표현식 수정 (예: `0 14-22 * * 1-5` = 평일 14-22시)
